#!/bin/bash
# 

# update lsstsw
if [[ -z $ZSH_NAME ]]; then
  LSSTSW=$(cd "$(dirname "${BASH_SOURCE[0]}")/.."; pwd) || return 1
  SUFFIX='sh'
else
  LSSTSW=$(cd "$(dirname "$0")/.."; pwd) || return 1
  SUFFIX='zsh'
fi

PWD=$(pwd)

  echo "Updating lsstsw from remote."
  # find the current branch
  cd "${LSSTSW}"
  branch=$(git rev-parse --abbrev-ref HEAD)
  echo " ... on branch ${branch}"
  git fetch origin "${branch}"
  git reset --hard "origin/${branch}"

cd "${PWD}"

# update lsst_build is deployed
if [[ -d "lsst_build" ]]; then
  # just update master for lsst
  cd lsst_build
  git pull
fi

# TBD: how we update versiondb? Ideally we should remove it from the loop
